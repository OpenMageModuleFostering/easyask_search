<?php
/**
 * Magento
 *
 * NOTICE OF LICENSE
 *
 * This source file is subject to the Academic Free License (AFL 3.0)
 * that is bundled with this package in the file LICENSE_AFL.txt.
 * It is also available through the world-wide-web at this URL:
 * http://opensource.org/licenses/afl-3.0.php
 * If you did not receive a copy of the license and are unable to
 * obtain it through the world-wide-web, please send an email
 * to license@magentocommerce.com so we can send you a copy immediately.
 *
 * DISCLAIMER
 *
 * Do not edit or add to this file if you wish to upgrade Magento to newer
 * versions in the future. If you wish to customize Magento for your
 * needs please refer to http://www.magentocommerce.com for more information.
 *
 * @category    design
 * @package     base_default
 * @copyright   Copyright (c) 2011 Magento Inc. (http://www.magentocommerce.com)
 * @license     http://opensource.org/licenses/afl-3.0.php  Academic Free License (AFL 3.0)
 */
?>
<form id="search_mini_form" action="<?php echo $this->helper('catalogsearch')->getResultUrl() ?>" method="get">
    <div class="form-search">
        <label for="search"><?php echo $this->__('Search:') ?></label>
        <input id="search" type="text" name="<?php echo $this->helper('catalogsearch')->getQueryParamName() ?>" value="<?php echo $this->helper('catalogsearch')->getEscapedQueryText() ?>" class="input-text" />
        <button id="searchBtn" type="submit" title="<?php echo $this->__('Search') ?>" class="button"><span><span><?php echo $this->__('Search') ?></span></span></button>

<!-- jQuery libraries with ui -->
<link rel="stylesheet" href="//code.jquery.com/ui/1.10.4/themes/smoothness/jquery-ui.css">
<script src="//code.jquery.com/jquery-1.10.2.js"></script>
<script src="//code.jquery.com/ui/1.10.4/jquery-ui.js"></script>
        
<script type='text/javascript'>
var $ea = jQuery.noConflict(); 
</script>                
<!-- <script src="/magento19/js/easyask/js/ea-noconflict.js"></script>  -->
<!--  <script type='text/javascript' src='/magento19/js/easyask/js/jquery-ui-1.9.2a.custom.min.js' > </script> 

<link type='text/css' rel='stylesheet' charset='utf-8' href='/magento19/js/easyask/css/flick/jquery-ui-1.9.2.custom.min.css'>
-->
<!-- EasyAsk SAYT -->
<script type='text/javascript' src='/magento19/js/easyask/2.0/ea-autocomplete-2.0.1.js' > </script>
<!-- If there is a configuration entry for base_url in database 
<script type='text/javascript' src='<?php echo Mage::getBaseUrl(Mage_Core_Model_Store::URL_TYPE_JS)?>easyask/js/ea-autocomplete-1.2.1.js' > </script>
-->
<link type='text/css' rel='stylesheet' charset='utf-8' href='/magento19/js/easyask/2.0/ea-autocomplete-2.0.1.css'>

<style>
img.ea-featured-product-image { width: 138px;}
.ea-toplevel-category { width: 550px; background: green; color: white; text-align: center; }
.ea-toplevel-attribute { width: 550px;background: blue; color: white; text-align: center; }
.ea-range-values { margin: 0px 10px; height: 50px;}
.ea-range-attr { height: 10px; margin: 5px 15px 5px 10px;}
.ea-range-container {padding-bottom: 25px !important;}
.ea-range-value {margin-top: 5px; text-align:right; width: 45px; font-size: 12px;}
.ea-range-min {  float: left; text-align: left;}
.ea-range-max { float: right; text-align: right;  }

.catalogsearch-result-index .ui-corner-all,
.catalogsearch-result-index .ui-corner-bottom,
.catalogsearch-result-index .ui-corner-right,
.catalogsearch-result-index .ui-corner-br { border-bottom-right-radius: 8px; }
.catalogsearch-result-index .ui-corner-all,
.catalogsearch-result-index .ui-corner-bottom,
.catalogsearch-result-index .ui-corner-left,
.catalogsearch-result-index .ui-corner-bl { border-bottom-left-radius: 8px; }
.catalogsearch-result-index .ui-corner-all,
.catalogsearch-result-index .ui-corner-top,
.catalogsearch-result-index .ui-corner-right,
.catalogsearch-result-index .ui-corner-tr { border-top-right-radius: 8px; }
.catalogsearch-result-index .ui-corner-all,
.catalogsearch-result-index .ui-corner-top,
.catalogsearch-result-index .ui-corner-left,
.catalogsearch-result-index .ui-corner-tl { border-top-left-radius: 8px; }
.catalogsearch-result-index .ui-state-default,
.catalogsearch-result-index .ui-widget-content .ui-state-default,
.catalogsearch-result-index .ui-widget-header .ui-state-default{
    background: url(/magento19/js/easyask/images/price_filter.png) no-repeat scroll -0.1em  ;
}
.catalogsearch-result-index .ui-slider,
.catalogsearch-result-index .ui-slider .ui-slider-range { background: none repeat scroll 0 0 #6C6C6C; }


/* PRICE SLIDER DESIGN BEGIN */
.catalogsearch-result-index .ui-slider-horizontal { height: 3px; }
.catalogsearch-result-index .ui-slider-horizontal .ui-slider-handle {
	top: -.5em;
	margin-left: -.3em;
}


/* PRICE SLIDER DESIGN END */



</style>

<script type='text/javascript'>
(function(jQuery){
	  (function( $, undefined ) {
	$(function() {
    var acOptions = {
    	id: 'search',
		dict: '<?php echo Mage::getStoreConfig('catalog/search/ea_dictionary') ?>',
		server: '<?php echo ((substr($this->helper('catalogsearch')->getResultUrl(), 0, strlen('https:')) === 'https:' ? 'https://' : 'http://')) . Mage::getStoreConfig('catalog/search/ea_server_hostname') . ':' . Mage::getStoreConfig('catalog/search/ea_server_port') ?>',
		serverSearch: '<?php echo ((substr($this->helper('catalogsearch')->getResultUrl(), 0, strlen('https:')) === 'https:' ? 'https://' : 'http://')) . Mage::getStoreConfig('catalog/search/ea_server_hostname') . ':' . Mage::getStoreConfig('catalog/search/ea_server_port') ?>',
        prompt: 'Search by EasyAsk',
        submitFctn: function(type,val){
            if (type == 'nav'){
				window.location = '<?php echo $this->helper('catalogsearch')->getResultUrl() ?>' + "index/?ea_bc=" + val;
            }
            else {
                $('#searchBtn').click();
            }
        },
        fixedWidth: 500,
        leftWidth:'60%',
        products: {
            fields: {
                thumbnail: 'Thumbnail_URL',
                name: 'Product_Name',
                description: 'SAYTDescription',
                price: 'Price',
                link: 'Url_Path'
            },
            sizes: {
                description: 115
           },
            value: function(item,field){
                if (field == 'Url_Path'){
                	item[field] = window.location.protocol + "//" + window.location.host + "/" + item[field]; 
                }
				return item[field];
           }
        },
        navigation: {
            size: 3,
            sections: [{
                size: 5,
                title: 'Category',
                type: 'Category'
            },{
                size: 4,
                title: 'Price Range',
                type: 'Price Range'
            },{
                size: 4,
                title: 'Style',
                type: 'Style'
            },{
                size: 4,
                title: 'Size',
                type: 'Size'
           }]
        }
    };
    new EAAutoComplete().init(acOptions);
});
	  }(jQuery));
}(window.$ea || jQuery));
</script>

       
    </div>
</form>
